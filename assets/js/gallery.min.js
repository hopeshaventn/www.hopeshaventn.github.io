let data_array = [];
$.getJSON(
  //"images/photoGallery/files.txt",
  "images/photoGallery/files.json",
  function (data) {
    // data_array = data.split("|");
    data_array = data.pictures;
    for (let i = data_array.length - 1; i >= 0; i--) {
      $(document).ready(function () {
        if ((i + 1) % 4 == 0) {
          $("#images").append('<div class="row-gallery">');
        }
        $("#images").append(
          '<div class="column-gallery"><img loading="lazy" alt="Not Found" src="images/camp-pictures/' +
            // onerror=this.src="images/hopesLogos/logo - circle.png"
            data_array[i] +
            '" id="img' +
            Math.ceil((data_array.length - i) / 4) +
            '" onclick="select(this);"/></div>'
        );
        if (i % 4 == 0) {
          $("#images").append(
            "</div>" +
              '<div id="div' +
              (data_array.length - i) / 4 +
              '" style="display: none"> <img style="width: 100%" id="expandedImg' +
              (data_array.length - i) / 4 +
              '"/><ul class="actions major"><li><a href="images/photoGallery/' +
              data_array[i] +
              '" class="button" download="' +
              data_array[i] +
              '" id="button' +
              (data_array.length - i) / 4 +
              '">Download</a></li></ul></div>'
          );
        }
      });
      const img = document.getElementById("img" + (data_array.length - i) / 4);
      img?.addEventListener("error", function (event) {
        event.target.src = "images/hopesLogos/logo - circle.png";
        //event.onerror = null
      });
    }
  },
  "text"
);
function select(imgs) {
  // Get the expanded image
  let id = imgs.id;
  id = id.replace("img", "");
  let expandImg = document.getElementById("expandedImg" + id);
  // Use the same src in the expanded image as the image being clicked on from the grid
  expandImg.src = imgs.src;
  console.log(id);
  const div = document.getElementById("div" + id);
  div.style.display = "block";
  const button = document.getElementById("button" + id);
  button.href = imgs.src;

  for (let i = 0; i < Math.max(data_array.length / 4); i++) {
    const temp_div = document.getElementById("div" + (i + 1));
    if (id != i + 1) {
      temp_div.style.display = "none";
    }
  }
}
